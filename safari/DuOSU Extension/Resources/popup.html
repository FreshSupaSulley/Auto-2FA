<!DOCTYPE html>
<script type="module" src="popup.js"></script>
<html>
  <head>
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <div style="display: inline-flex; -webkit-user-select: none; user-select: none;">
      <!-- DuOSU logo -->
      <a href="https://addons.mozilla.org/en-US/firefox/addon/duosu" target="_blank" class="expand"><img style="margin: 0; border: none;" src="images/DuOSU.svg"></a>
      <h1 style="margin: 0; margin-left: 5px">DuOSU</h1>
      <!-- Day night -->
      <img id="daynight" src="images/daynight.svg">
      <!-- Gear SVG -->
      <svg id="gear" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" width="26px" height="26px" viewBox="0 0 24 24" fill="gray">
        <rect fill="none" height="26" width="26"></rect>
        <path id="gearChange" d="M19.5,12c0-0.23-0.01-0.45-0.03-0.68l1.86-1.41c0.4-0.3,0.51-0.86,0.26-1.3l-1.87-3.23c-0.25-0.44-0.79-0.62-1.25-0.42 l-2.15,0.91c-0.37-0.26-0.76-0.49-1.17-0.68l-0.29-2.31C14.8,2.38,14.37,2,13.87,2h-3.73C9.63,2,9.2,2.38,9.14,2.88L8.85,5.19 c-0.41,0.19-0.8,0.42-1.17,0.68L5.53,4.96c-0.46-0.2-1-0.02-1.25,0.42L2.41,8.62c-0.25,0.44-0.14,0.99,0.26,1.3l1.86,1.41 C4.51,11.55,4.5,11.77,4.5,12s0.01,0.45,0.03,0.68l-1.86,1.41c-0.4,0.3-0.51,0.86-0.26,1.3l1.87,3.23c0.25,0.44,0.79,0.62,1.25,0.42 l2.15-0.91c0.37,0.26,0.76,0.49,1.17,0.68l0.29,2.31C9.2,21.62,9.63,22,10.13,22h3.73c0.5,0,0.93-0.38,0.99-0.88l0.29-2.31 c0.41-0.19,0.8-0.42,1.17-0.68l2.15,0.91c0.46,0.2,1,0.02,1.25-0.42l1.87-3.23c0.25-0.44,0.14-0.99-0.26-1.3l-1.86-1.41 C19.49,12.45,19.5,12.23,19.5,12z M12.04,15.5c-1.93,0-3.5-1.57-3.5-3.5s1.57-3.5,3.5-3.5s3.5,1.57,3.5,3.5S13.97,15.5,12.04,15.5z"></path>
      </svg>
    </div>
    <hr style="margin-top: 7px">

    <!-- Welcome screen -->
    <div class="screen" id="intro">
      <h2>You're almost done.</h2>
      <h4>Before you can use DuOSU, you'll need to get an activation code.</h4>
      <button type="submit" id="introButton">Let's go</button>
    </div>

    <!-- Activation screen -->
    <div class="screen" id="activation">
      <h4 id="errorSplash">Use arrows to flip through instructions:</h4>

      <!-- Table to distribute buttons evenly -->
      <table>
        <tr>
          <td><button id="prev">&#10094;</button></td>
          <td style="width: 50%"><p id="counter"></p></td>
          <td><button id="next">&#10095;</button></td>
        </tr>
      </table>

      <div class="steps">
        <div class="slide">
          <p>Find your Duo Mobile devices website. Add a new device.<br><br>(OSU students <a href="https://osu.login.duosecurity.com/devices?link_clicked=true/" target="_blank">click here</a>)</p>
          <img src="/images/image0.png">
        </div>
        <div class="slide">
          <p>Click "Duo Mobile".</p>
          <img src="/images/image1.png">
        </div>
        <div class="slide">
          <p>Click "I have a tablet".</p>
          <img src="/images/image2.png">
        </div>
        <div class="slide">
          <p>Click "Next". You don't need to download the app.</p>
          <img src="/images/image3.png">
        </div>
        <div class="slide">
          <p>Click "Get an activation link instead".</p>
          <img src="/images/image4.png">
        </div>
        <div class="slide">
          <p>Enter your email address.</p>
          <img src="/images/image5.png">
        </div>
        <div class="slide">
          <p>Find the email and paste the code in the box. Click activate.</p>
          <img src="/images/image6.png">
          <table>
            <tr>
              <td>
                <input type="text" id="code" placeholder="Paste activation code">
              </td>
              <td style="width: 60%">
                <button type="submit" id="activateButton">Activate</button>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <h4 style="margin: 0; padding: 0; font-size: 10px;">Confused? <a href="https://github.com/FreshSupaSulley/DuOSU/blob/main/TUTORIAL.md" target="_blank">Click for more detailed instructions</a>.</h4>
    </div>

    <!-- Activation success page -->
    <div class="screen" id="activationSuccess">
      <p><b>DuOSU Activated!</b></p>
      <p>Next time you login through Duo, click "Other Options" -> "Send to Android"</p>
      <div class="oneSlide">
        <img src="/images/tutorial.png">
        <p>Then tap this extension to approve the login.</p>
      </div>
      <button type="submit" class="toMainScreen">Got it</button>
    </div>

    <!-- Home screen -->
    <div class="screen" id="main">
      <!-- Elements dynamically altered in JS -->
      <p id="splash"></p>
      <button type="submit" id="pushButton">Login</button>
      <!-- Help button -->
      <img id="helpButton" src="images/help.svg">
    </div>

    <!-- Multiple push requests are active -->
    <div class="screen" id="transactions">
      <!-- Elements dynamically altered in JS -->
      <p id="transactionsSplash"></p>
      <table id="approveTable"></table>
    </div>

    <!-- User fails to login multiple times -->
    <div class="screen" id="failedAttempts">
      <div class="oneSlide">
        <p>You need to send a push request to DuOSU. Click "Other options" and select "Send to Android".</p>
        <img src="/images/tutorial.png">
        <p>Then click on the extension to approve the login.</p>
      </div>
      <p>If you're still having trouble, check out the <a href="https://github.com/FreshSupaSulley/DuOSU" target="_blank">website</a>.</p>
      <button type="submit" id="failureButton">Got it</button>
    </div>

    <!-- Success -->
    <div class="screen" id="success">
      <!-- Elements dynamically altered in JS -->
      <p style="margin-bottom: 15px">Logged in!</p>
      <p id="successDetails"></p>
      <button type="submit" class="toMainScreen">Try Again</button>
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
        <circle class="checkmarkCircle" cx="26" cy="26" r="25" fill="none"/>
        <path class="checkmarkCheck" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
      </svg>
    </div>

    <!-- Failure -->
    <div class="screen" id="failure">
      <p>Failed</p>
      <p id="failedReason"></p>
      <p>If the error persists, reset DuOSU in settings.</p>
      <button type="submit" class="toMainScreen">Try Again</button>
    </div>

    <div class="screen" id="settings">
      <table>
        <tr>
          <td>
            <input type="checkbox" id="clickLogin" name="One-Click Login">
          </td>
          <td>
            <h4>One-click login (<a target="_blank" href="https://github.com/FreshSupaSulley/DuOSU/blob/main/README.md#one-click-login">what's this?</a>)</h4>
          </td>
        </tr>
        <tr>
          <td>
            <input style="width: 80%; margin-bottom: 4px;" placeholder="Paste data here" id="importText">
            <button type="submit" id="importButton">Import</button>
          </td>
          <td>
            <h4 id="importSplash" style="margin-top: 25px; margin-bottom: 25px">Import login data from another DuOSU.</h4>
          </td>
        </tr>
        <tr>
          <td>
            <button type="submit" id="exportButton">Export</button>
            <input style="cursor: not-allowed; width: 80%; margin-top: 4px;" placeholder="Click export" id="exportText" readonly>
          </td>
          <td>
            <h4 style="margin-top: 35px; margin-bottom: 35px">Export login data.</h4>
          </td>
        </tr>
        <tr>
          <td><button type="submit" id="resetButton">Reset</button></td>
          <td><h4 id="resetSplash">Delete all data. You'll need to reactivate or import data.</h4></td>
        </tr>
      </table>
    </div>
  </body>
</html>
